

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; PCVS 0.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="../_static/pcvs_favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=6a14807c"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation Guide" href="installation.html" />
    <link rel="prev" title="Feature Overview" href="features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PCVS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="features.html">Feature Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pcvs-formatted-test-suite">PCVS-formatted test-suite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-suite-layout">Test-suite layout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#execute-the-test-suite">Execute the test-suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-the-results">Access the results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-use.html">Basic usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Common workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ref/test-file.html">Validation setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/config.html">Configuration basic blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/profile.html">Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/examples.html">Input Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pcvs.html">Package Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PCVS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/basics/getting-started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>The source code is available on GitHub. To checkout the latest release:
(detailed documentation in <a class="reference internal" href="installation.html"><span class="doc">Installation Guide</span></a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/cea-hpc/pcvs.git<span class="w"> </span>pcvs
$<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>./pcvs
$<span class="w"> </span>pcvs
Usage:<span class="w"> </span>pcvs<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>COMMAND<span class="w"> </span><span class="o">[</span>ARGS<span class="o">]</span>...

PCVS<span class="w"> </span>main<span class="w"> </span>program.
...
</pre></div>
</div>
<p>Full completion (options &amp; arguments) is provided and can be activated with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ZSH support</span>
$<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nv">_PCVS_COMPLETE</span><span class="o">=</span>zsh_source<span class="w"> </span>pcvs<span class="k">)</span><span class="s2">&quot;</span>
<span class="c1"># BASH support</span>
$<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nv">_PCVS_COMPLETE</span><span class="o">=</span>bash_source<span class="w"> </span>pcvs<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="pcvs-formatted-test-suite">
<h2>PCVS-formatted test-suite<a class="headerlink" href="#pcvs-formatted-test-suite" title="Permalink to this heading"></a></h2>
<section id="test-suite-layout">
<span id="id2"></span><h3>Test-suite layout<a class="headerlink" href="#test-suite-layout" title="Permalink to this heading"></a></h3>
<p>While PCVS is highly customizable, it comes with templates to locally test it
without any prior knowledge. Before using PCVS, let’s consider a provided
test-suite as any <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory
(<a class="reference download internal" download="" href="../_downloads/19e83f8640aaf0f818647b3e869c9988/all-reduce.c"><code class="xref download docutils literal notranslate"><span class="pre">all-reduce.c</span></code></a> &amp;
<a class="reference download internal" download="" href="../_downloads/627978c189abf9627c27c440ba5d12d0/wave.c"><code class="xref download docutils literal notranslate"><span class="pre">wave.c</span></code></a> provided for convenience):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>tree<span class="w"> </span>tests
tests
├──<span class="w"> </span>coll
│<span class="w">   </span>└──<span class="w"> </span>all-reduce.c
└──<span class="w"> </span>pt2pt
<span class="w">        </span>└──<span class="w"> </span>wave.c
<span class="m">2</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">2</span><span class="w"> </span>files
</pre></div>
</div>
<p>PCVS needs rules to know how to parse the test-suite above to create tests. This
will be done through <code class="docutils literal notranslate"><span class="pre">pcvs.yml</span></code> specification file. Such a file can be placed
anywhere in the file tree. Consider putting it directly under the <code class="docutils literal notranslate"><span class="pre">tests/</span></code>
directory for this example. Here is the content of this file:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A test is the combination of a program, its arguments and the environment
used to execute it. From PCVS’ point of view, a test file does not carry the
whole test environment. The orchestrator itself manage to build it directly
from specification. Thus, <code class="docutils literal notranslate"><span class="pre">pcvs.yml</span></code> expects the user to describe programs
to be used to build the test-suite.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># put this in test/pcvs.yml:</span>
<span class="nt">all_reduce_test</span><span class="p">:</span>
<span class="w">        </span><span class="nt">build</span><span class="p">:</span>
<span class="w">                </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;coll/all-reduce.c&quot;</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span>
<span class="w">                </span><span class="nt">program</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a.out&quot;</span>
<span class="nt">pt2pt_test</span><span class="p">:</span>
<span class="w">        </span><span class="nt">build</span><span class="p">:</span>
<span class="w">                </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pt2pt/wave.c&quot;</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span>
<span class="w">                </span><span class="nt">program</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a.out&quot;</span>
</pre></div>
</div>
<p>This file specifies two root nodes referred as <em>Test Expressions</em> (TE) or <em>Test
Descriptors</em> (TD). It contains subondes describing how to build programs.
A <code class="docutils literal notranslate"><span class="pre">build</span></code> gives information about how to build the program.
<code class="docutils literal notranslate"><span class="pre">files</span></code> (a list <em>or</em> a string) contains the whole list of files required to
build the program (in case of a C file for instance).  With no other
information, PCVS will assume the program to be built with a compiler (no
invocation to a build system here). A <code class="docutils literal notranslate"><span class="pre">run</span></code> subnode instructs PCVS to execute
this program. The expected program name is <code class="docutils literal notranslate"><span class="pre">a.out</span></code>. This is the simplest way
to integrate tests to PCVS. For a complete list of nodes to be used in a
<code class="docutils literal notranslate"><span class="pre">pcvs.yml</span></code>, please consult <a class="reference internal" href="../ref/examples.html#te-format"><span class="std std-ref">TE nodes: The complete list</span></a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Beware of tabulations, YAML indentations only supports spaces !</p>
</div>
</section>
</section>
<section id="execute-the-test-suite">
<h2>Execute the test-suite<a class="headerlink" href="#execute-the-test-suite" title="Permalink to this heading"></a></h2>
<p>PCVS relies on (1) test specifications and (2) execution profile to create and
execute a full benchmarks. Building a valid profile may be complex at first but
offer a huge flexibility to solve complex validation scenarios. Still, most
scenarios share similarities, like, in that case, running MPI programs. PCVS
comes with default profiles for default scenarios. Here, we select the
<cite>mpi</cite> base profile to build our own:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pcvs<span class="w"> </span>profile<span class="w"> </span>create<span class="w"> </span>user.my-profile<span class="w"> </span>--base<span class="w"> </span>mpi
$<span class="w"> </span>pcvs<span class="w"> </span>profile<span class="w"> </span>list
</pre></div>
</div>
<p>By specifying <code class="docutils literal notranslate"><span class="pre">user.my-profile</span></code>, it will save the profile under <code class="docutils literal notranslate"><span class="pre">~/.pcvs/</span></code> and
make it available for the whole <code class="docutils literal notranslate"><span class="pre">$USER</span></code>, no matter the current working
directory used when running PCVS. To learn more about profile scope, please see <a class="reference internal" href="../ref/profile.html#profile-scope"><span class="std std-ref">Scope</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As this profile uses MPI, we need to source an MPI implementation in the
environment. Please use the method suiting your needs (spack/module/source).
If interested in autoloading spack-or-module-based MPI implementation,
please read <a class="reference internal" href="../ref/profile.html"><span class="doc">Profiles</span></a>.</p>
</div>
<p>Now, start PCVS. You must provide the profile &amp; the directory where tests are
located:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pcvs<span class="w"> </span>run<span class="w"> </span>--profile<span class="w"> </span>my-profile<span class="w"> </span>./tests/
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="docutils literal notranslate"><span class="pre">user.</span></code> prefix to the profile name may be removed as there is no
name ambiguity, PCVS will detect the proper scope.</p>
</div>
</section>
<section id="access-the-results">
<h2>Access the results<a class="headerlink" href="#access-the-results" title="Permalink to this heading"></a></h2>
<p>Results are stored in <code class="docutils literal notranslate"><span class="pre">$PWD/.pcvs-build/rawdata/*.json</span></code> by default. The
default output directory may be changed with <cite>pcvs run –output</cite>. JSON files can
directly process by third-party tools. The <a class="reference download internal" download="" href="../_downloads/adb2b1da40fcf36dbdc190080992a76d/test-result-scheme.yml"><code class="xref download docutils literal notranslate"><span class="pre">scheme</span></code></a> can be used to update the input
parser with compliant output. Currently, PCVS only provides specific JSON format.
It is planned to support common validation format (like JUnit).</p>
<p>If no third-party tool is available, PCVS comes with a lightweight web server
(=Flask) to serve results in a web browser:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># where pcvs run has been run:</span>
$<span class="w"> </span>pcvs<span class="w"> </span>report
<span class="c1"># OR you may specify the run path</span>
$<span class="w"> </span>pcvs<span class="w"> </span>report<span class="w"> </span>&lt;path&gt;
</pre></div>
</div>
<p>Then, browse <a class="reference external" href="http://localhost:5000/">http://localhost:5000/</a> to browse your results.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="features.html" class="btn btn-neutral float-left" title="Feature Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, Commissariat a l&#39;Energie Atomique et aux Energies Alternatives.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>